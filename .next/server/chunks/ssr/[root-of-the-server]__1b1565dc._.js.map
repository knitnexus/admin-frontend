{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/public/logo.svg.mjs (structured image object with data url)","turbopack:///[project]/node_modules/zustand/esm/react.mjs","turbopack:///[project]/node_modules/zustand/esm/vanilla.mjs","turbopack:///[project]/src/services/auth.ts","turbopack:///[project]/src/store/useAuthStore.ts","turbopack:///[project]/src/app/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","import src from \"IMAGE\";\nexport default { src, width: 507, height: 84, blurWidth: 0, blurHeight: 0};\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n","import {BACKEND_SERVICE_URL} from \"../../config\";\n\nexport async function login(email: string, password: string) {\n    const res = await fetch(`${BACKEND_SERVICE_URL}/auth/login`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n        credentials: \"include\", // <--- send cookie\n    });\n\n    if (!res.ok) {\n        const data = await res.json().catch(() => null);\n        throw new Error(data?.message || \"Login failed\");\n    }\n\n    return res.json();\n}\n\nexport async function logout() {\n    await fetch(`${BACKEND_SERVICE_URL}/auth/logout`, {\n        method: \"POST\",\n        credentials: \"include\",\n    });\n}\n\nexport async function getMe() {\n    const res = await fetch(`${BACKEND_SERVICE_URL}/auth/admin`, {\n        credentials: \"include\",\n    });\n\n    if (!res.ok) throw new Error(\"Not authenticated\");\n    return res.json();\n}\n","// store/useAuthStore.ts\nimport { create } from \"zustand\";\nimport * as authService from \"@/services/auth\";\n\ntype User = { email: string; role: string };\n\ntype AuthState = {\n    user: User | null;\n    loading: boolean;\n    error: string | null;\n    login: (email: string, password: string) => Promise<void>;\n    logout: () => Promise<void>;\n    fetchUser: () => Promise<void>;\n};\n\nexport const useAuthStore = create<AuthState>((set, get) => ({\n    user: null,\n    loading: false,\n    error: null,\n\n    // Helper for error handling\n    setError: (err: unknown) => {\n        const message = err instanceof Error ? err.message : \"Something went wrong\";\n        set({ error: message });\n    },\n\n    login: async (email, password) => {\n        if (get().loading) return; // prevent multiple requests\n        set({ loading: true, error: null });\n\n        try {\n            await authService.login(email, password); // backend sets HttpOnly cookie\n            const user = await authService.getMe();\n            set({ user });\n        } catch (err: unknown) {\n            const message = err instanceof Error ? err.message : \"Login failed\";\n            set({ error: message });\n        } finally {\n            set({ loading: false });\n        }\n    },\n\n    logout: async () => {\n        try {\n            await authService.logout();\n        } finally {\n            set({ user: null });\n        }\n    },\n\n    fetchUser: async () => {\n        try {\n            const user = await authService.getMe();\n            set({ user, error: null });\n        } catch {\n            set({ user: null });\n        }\n    },\n}));\n","\"use client\"\nimport Image from \"next/image\";\nimport logo from '../../public/logo.svg';\nimport {useAuthStore} from \"@/store/useAuthStore\";\nimport {useEffect, useState} from \"react\";\nimport {usePathname, useRouter} from \"next/navigation\";\nexport default function Home() {\n\nconst {login, loading , error , user,fetchUser }= useAuthStore();\n\n    interface CompanyForm {\n        email: string;\n        password: string;\n        // add all fields your form collects\n    }\n\n    const [form, setForm] = useState<CompanyForm>({\n        email: \"\",\n        password: \"\",\n    });\n\n    const router = useRouter();\nconst pathname=usePathname()\n    useEffect(() => {\n        fetchUser();\n    }, [fetchUser]);\n\n    // Redirect if logged in\n    useEffect(() => {\n        if (user && pathname === \"/\") {\n            router.push(\"/dashboard\");\n        }\n    }, [user, pathname,router]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n        setForm(prev => ({ ...prev, [e.target.id]: e.target.value }));\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        await login(form.email, form.password);\n    };\n\n  return  (\n        <div className=\"flex text-black min-h-screen flex-col md:flex-row\">\n            {/* Left Section */}\n            <div className=\"flex flex-1 flex-col justify-center bg-gray-50 p-8\">\n                <div className=\"mb-8\">\n                   <Image  alt={\"logo\"} src={logo}></Image>\n                </div>\n                <h1 className=\"text-2xl font-bold text-gray-800\">\n                    Login into the  App\n                </h1>\n                <p className=\"mt-2 text-gray-500\">\n                    Admin access only. Please sign in to continue.\n                </p>\n            </div>\n\n            {/* Right Section */}\n            <div className=\"flex flex-1 items-center justify-center bg-white p-8 shadow-md\">\n                <div className=\"w-full max-w-sm\">\n                    <h2 className=\"mb-6 text-xl font-semibold text-gray-700\">\n                        Admin Login\n                    </h2>\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div>\n                            <label\n                                htmlFor=\"email\"\n                                className=\"block text-sm font-medium text-gray-600\"\n                            >\n                                Email\n                            </label>\n                            <input\n                                type=\"email\"\n                                id=\"email\"\n                                onChange={handleChange}\n                                required\n                                disabled={loading}\n                                value={form.email}\n                                className=\"mt-1 w-full rounded-lg border border-gray-300 p-2 focus:border-indigo-500 focus:ring focus:ring-indigo-200\"\n                                placeholder=\"you@example.com\"\n                            />\n                        </div>\n                        <div>\n                            <label\n\n                                htmlFor=\"password\"\n                                className=\"block text-sm font-medium text-gray-600\"\n                            >\n                                Password\n                            </label>\n                            <input\n                                onChange={handleChange}\n                                value={form.password}\n                                type=\"password\"\n                                disabled={loading}\n                                required\n                                id=\"password\"\n                                className=\"mt-1 w-full rounded-lg border border-gray-300 p-2 focus:border-indigo-500 focus:ring focus:ring-indigo-200\"\n                                placeholder=\"••••••••\"\n                            />\n                        </div>\n                        {/* Show error */}\n                        {error && <p className=\"text-red-500 mt-2\">{error}</p>}\n                        {loading && <p className=\"text-gray-500 mt-2\">Please wait...</p>}\n\n                        <button\n                            disabled={loading}\n\n                            type=\"submit\"\n                            className=\"w-full rounded-lg bg-indigo-600 p-2 text-white hover:bg-indigo-700\"\n                        >\n                            {loading ? \"Logging in...\" : \"Login\"}\n                        </button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["module","exports","require","vendored","React","ReactDOM","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,8,9]}